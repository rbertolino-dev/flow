#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Pre-push hook para validar cÃ³digo antes de push
# 
# Executa:
# - Testes E2E (apenas se houver mudanÃ§as relevantes)
# - VerificaÃ§Ã£o de seguranÃ§a (npm audit)

echo "ğŸš€ Executando validaÃ§Ãµes prÃ©-push..."

# 1. Verificar vulnerabilidades de seguranÃ§a
echo "ğŸ”’ Verificando vulnerabilidades de seguranÃ§a..."
npm audit --audit-level=moderate || {
  echo "âš ï¸  Vulnerabilidades encontradas. Execute 'npm audit fix' para corrigir."
  echo "ğŸ’¡ Continuando push, mas revise as vulnerabilidades."
}

# 2. Verificar se hÃ¡ testes E2E configurados
if [ -f "playwright.config.ts" ]; then
  echo "ğŸ§ª Verificando se testes E2E estÃ£o configurados..."
  # NÃ£o executa testes aqui (pode ser lento)
  # Apenas verifica se estÃ¡ tudo OK
  echo "âœ… Testes E2E configurados"
fi

echo "âœ… ValidaÃ§Ãµes prÃ©-push concluÃ­das!"





