# üîç REGRA CR√çTICA: Valida√ß√£o de Imports de Componentes UI

## üìã Regra Principal: SEMPRE Verificar Imports Antes de Usar Componentes

**O Cursor DEVE SEMPRE verificar se TODOS os componentes usados est√£o importados antes de usar, especialmente componentes UI reutiliz√°veis.**

---

## ‚ö†Ô∏è ERRO RECORRENTE: Componentes UI Usados Sem Import

### Problema Identificado:

**Erro:** `ReferenceError: DialogDescription is not defined`

**Causa Raiz:**
- Componente `DialogDescription` foi usado em `CreateLeadDialog.tsx` (linha 393)
- Mas N√ÉO estava importado na linha 2 do arquivo
- O bundler (Vite/Rollup) n√£o incluiu o componente no bundle porque n√£o havia import expl√≠cito
- Resultado: Erro em runtime quando o componente tentava renderizar

**Impacto:**
- ‚ùå P√°gina branca ou erro cr√≠tico
- ‚ùå Funcionalidade quebrada
- ‚ùå Erro dif√≠cil de debugar (s√≥ aparece em runtime)

---

## ‚úÖ REGRAS OBRIGAT√ìRIAS PARA PREVEN√á√ÉO

### 1. Valida√ß√£o de Imports ANTES de Usar Componentes

**SEMPRE** seguir este fluxo:

```
1. Identificar componente a ser usado (ex: <DialogDescription>)
   ‚Üì
2. Verificar se est√° importado no topo do arquivo
   ‚Üì
3. Se N√ÉO estiver importado:
   ‚úÖ Adicionar import ANTES de usar
   ‚úÖ Verificar se componente existe no arquivo de origem
   ‚úÖ Verificar se est√° exportado corretamente
   ‚Üì
4. Se estiver importado:
   ‚úÖ Verificar se import est√° correto (caminho, nome)
   ‚úÖ Verificar se componente est√° exportado no arquivo de origem
```

### 2. Padr√£o de Import para Componentes UI

**SEMPRE** usar imports expl√≠citos e completos:

```typescript
// ‚úÖ CORRETO - Import expl√≠cito de todos os componentes usados
import { 
  Dialog, 
  DialogContent, 
  DialogHeader, 
  DialogTitle, 
  DialogDescription,  // ‚úÖ Inclu√≠do se for usar
  DialogFooter 
} from "@/components/ui/dialog";

// ‚ùå ERRADO - Import incompleto (faltando DialogDescription)
import { 
  Dialog, 
  DialogContent, 
  DialogHeader, 
  DialogTitle, 
  DialogFooter 
} from "@/components/ui/dialog";
// Mas usando <DialogDescription> no c√≥digo abaixo
```

### 3. Checklist ANTES de Usar Componente UI

**SEMPRE** verificar antes de usar qualquer componente:

- [ ] Componente est√° importado no topo do arquivo?
- [ ] Import est√° correto (caminho e nome)?
- [ ] Componente est√° exportado no arquivo de origem?
- [ ] Nome do componente no import corresponde ao usado no JSX?
- [ ] N√£o h√° typos no nome do componente?

### 4. Valida√ß√£o Autom√°tica de Imports

**SEMPRE** executar valida√ß√£o antes de fazer commit:

```bash
# Verificar imports faltando
grep -r "<DialogDescription" src/ --include="*.tsx" | while read line; do
  file=$(echo "$line" | cut -d: -f1)
  if ! grep -q "DialogDescription" "$file" | head -20; then
    echo "‚ùå ERRO: DialogDescription usado mas n√£o importado em $file"
  fi
done
```

### 5. Padr√µes de Export em Componentes UI

**SEMPRE** garantir que componentes UI est√£o exportados corretamente:

```typescript
// ‚úÖ CORRETO - Export expl√≠cito e individual
export { DialogDescription };

export {
  Dialog,
  DialogPortal,
  DialogOverlay,
  DialogClose,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,  // ‚úÖ Inclu√≠do no export group tamb√©m
};
```

**NUNCA** fazer:
- ‚ùå Export apenas no grupo (pode ser removido por tree-shaking)
- ‚ùå Export condicional
- ‚ùå Export com nome diferente do componente

---

## üîç COMPONENTES UI CR√çTICOS (Verificar Sempre)

### Componentes que Frequentemente Esquecem de Importar:

1. **Dialog Components:**
   - `DialogDescription` ‚ö†Ô∏è (mais comum)
   - `DialogTitle`
   - `DialogHeader`
   - `DialogFooter`
   - `DialogContent`
   - `DialogTrigger`

2. **Alert Dialog Components:**
   - `AlertDialogDescription`
   - `AlertDialogTitle`
   - `AlertDialogHeader`
   - `AlertDialogFooter`

3. **Select Components:**
   - `SelectContent`
   - `SelectItem`
   - `SelectTrigger`
   - `SelectValue`

4. **Table Components:**
   - `TableHeader`
   - `TableBody`
   - `TableRow`
   - `TableCell`
   - `TableHead`

5. **Card Components:**
   - `CardHeader`
   - `CardTitle`
   - `CardDescription`
   - `CardContent`
   - `CardFooter`

---

## üõ°Ô∏è PREVEN√á√ÉO AUTOM√ÅTICA

### Regra de Valida√ß√£o no Cursor:

**SEMPRE** executar estas verifica√ß√µes ao editar arquivos:

1. **Antes de adicionar componente JSX:**
   - Verificar se componente est√° importado
   - Se n√£o estiver, adicionar import automaticamente

2. **Antes de fazer commit:**
   - Verificar todos os componentes usados t√™m imports
   - Verificar todos os imports est√£o corretos

3. **Ao criar novo componente UI:**
   - Garantir que est√° exportado corretamente
   - Garantir que export est√° no lugar certo (n√£o apenas no grupo)

---

## üìù EXEMPLOS DE CORRE√á√ÉO

### Exemplo 1: DialogDescription Faltando

**‚ùå ERRADO:**
```typescript
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from "@/components/ui/dialog";

// ... c√≥digo ...

<DialogContent>
  <DialogHeader>
    <DialogTitle>T√≠tulo</DialogTitle>
    <DialogDescription>Descri√ß√£o</DialogDescription>  // ‚ùå N√£o importado!
  </DialogHeader>
</DialogContent>
```

**‚úÖ CORRETO:**
```typescript
import { 
  Dialog, 
  DialogContent, 
  DialogHeader, 
  DialogTitle, 
  DialogDescription,  // ‚úÖ Adicionado
  DialogFooter 
} from "@/components/ui/dialog";

// ... c√≥digo ...

<DialogContent>
  <DialogHeader>
    <DialogTitle>T√≠tulo</DialogTitle>
    <DialogDescription>Descri√ß√£o</DialogDescription>  // ‚úÖ Agora funciona
  </DialogHeader>
</DialogContent>
```

### Exemplo 2: M√∫ltiplos Componentes Faltando

**‚ùå ERRADO:**
```typescript
import { Dialog, DialogContent } from "@/components/ui/dialog";

<Dialog>
  <DialogContent>
    <DialogHeader>  // ‚ùå N√£o importado
      <DialogTitle>T√≠tulo</DialogTitle>  // ‚ùå N√£o importado
      <DialogDescription>Descri√ß√£o</DialogDescription>  // ‚ùå N√£o importado
    </DialogHeader>
    <DialogFooter>  // ‚ùå N√£o importado
      <Button>OK</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

**‚úÖ CORRETO:**
```typescript
import { 
  Dialog, 
  DialogContent,
  DialogHeader,  // ‚úÖ Adicionado
  DialogTitle,  // ‚úÖ Adicionado
  DialogDescription,  // ‚úÖ Adicionado
  DialogFooter  // ‚úÖ Adicionado
} from "@/components/ui/dialog";

<Dialog>
  <DialogContent>
    <DialogHeader>  // ‚úÖ Funciona
      <DialogTitle>T√≠tulo</DialogTitle>  // ‚úÖ Funciona
      <DialogDescription>Descri√ß√£o</DialogDescription>  // ‚úÖ Funciona
    </DialogHeader>
    <DialogFooter>  // ‚úÖ Funciona
      <Button>OK</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

---

## üö® CHECKLIST OBRIGAT√ìRIO

**SEMPRE** verificar antes de concluir edi√ß√£o:

- [ ] Todos os componentes JSX usados est√£o importados?
- [ ] Todos os imports est√£o no topo do arquivo?
- [ ] Nomes dos imports correspondem aos usados no JSX?
- [ ] Componentes est√£o exportados no arquivo de origem?
- [ ] N√£o h√° typos nos nomes dos componentes?
- [ ] Caminhos dos imports est√£o corretos (@/components/ui/...)?

---

## üîß FERRAMENTAS DE VALIDA√á√ÉO

### Script de Valida√ß√£o (Opcional):

```bash
#!/bin/bash
# scripts/validate-ui-imports.sh

echo "üîç Validando imports de componentes UI..."

# Lista de componentes cr√≠ticos
COMPONENTS=("DialogDescription" "DialogTitle" "DialogHeader" "AlertDialogDescription" "SelectContent")

for component in "${COMPONENTS[@]}"; do
  echo "Verificando $component..."
  grep -r "<$component" src/ --include="*.tsx" | while read line; do
    file=$(echo "$line" | cut -d: -f1)
    if ! grep -q "$component" "$file" | head -20; then
      echo "‚ùå ERRO: $component usado mas n√£o importado em $file"
      exit 1
    fi
  done
done

echo "‚úÖ Valida√ß√£o conclu√≠da!"
```

---

## üìö REFER√äNCIAS

- **Arquivo de origem:** `src/components/ui/dialog.tsx`
- **Erro original:** `ReferenceError: DialogDescription is not defined`
- **Arquivo problem√°tico:** `src/components/crm/CreateLeadDialog.tsx` (linha 393)
- **Solu√ß√£o:** Adicionar import de `DialogDescription` na linha 2

---

## ‚ö° A√á√ÉO IMEDIATA

**SEMPRE** que usar um componente UI:

1. ‚úÖ Verificar se est√° importado
2. ‚úÖ Se n√£o estiver, adicionar import
3. ‚úÖ Verificar se componente existe e est√° exportado
4. ‚úÖ Testar se funciona antes de fazer commit

**NUNCA** usar componente sem verificar import primeiro!

---

**√öltima atualiza√ß√£o:** 2025-12-21
**Baseado em:** Erro `ReferenceError: DialogDescription is not defined` em `CreateLeadDialog.tsx`
